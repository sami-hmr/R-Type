<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>r-type: include/ecs/Registry.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">r-type<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_03b8e24d0c8528d6b83b13523eccafd1.html">ecs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">Registry.hpp</div></div>
</div><!--header-->
<div class="contents">
<a href="Registry_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="preprocessor">#include &lt;any&gt;</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="preprocessor">#include &lt;random&gt;</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="preprocessor">#include &lt;stack&gt;</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span><span class="preprocessor">#include &lt;stdexcept&gt;</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="preprocessor">#include &lt;typeindex&gt;</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="preprocessor">#include &lt;unordered_set&gt;</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="preprocessor">#include &quot;<a class="code" href="Clock_8hpp.html">Clock.hpp</a>&quot;</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span><span class="preprocessor">#include &quot;Json/JsonParser.hpp&quot;</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span><span class="preprocessor">#include &quot;<a class="code" href="SparseArray_8hpp.html">SparseArray.hpp</a>&quot;</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span><span class="preprocessor">#include &quot;<a class="code" href="TwoWayMap_8hpp.html">TwoWayMap.hpp</a>&quot;</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="preprocessor">#include &quot;<a class="code" href="ComponentState_8hpp.html">ecs/ComponentState.hpp</a>&quot;</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="preprocessor">#include &quot;<a class="code" href="Entity_8hpp.html">ecs/Entity.hpp</a>&quot;</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span><span class="preprocessor">#include &quot;<a class="code" href="Scenes_8hpp.html">ecs/Scenes.hpp</a>&quot;</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="preprocessor">#include &quot;<a class="code" href="Systems_8hpp.html">ecs/Systems.hpp</a>&quot;</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="preprocessor">#include &quot;<a class="code" href="Byte_8hpp.html">plugin/Byte.hpp</a>&quot;</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="preprocessor">#include &quot;<a class="code" href="HookConcept_8hpp.html">plugin/HookConcept.hpp</a>&quot;</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="preprocessor">#include &quot;<a class="code" href="EventConcept_8hpp.html">plugin/events/EventConcept.hpp</a>&quot;</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span><span class="keyword">using </span><a class="code hl_typedef" href="namespaceEcs.html#a17fcea5750c1db2eea6f26c520f9235b">Ecs::Entity</a>;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno"><a class="line" href="conceptcomponent.html">  265</a></span><span class="keyword">concept </span><a class="code hl_concept" href="conceptcomponent.html">component</a> = <a class="code hl_concept" href="conceptbytable.html">bytable&lt;T&gt;</a> &amp;&amp; <a class="code hl_concept" href="conceptentity__convertible.html">entity_convertible&lt;T&gt;</a>;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="keyword">class </span><a class="code hl_class" href="classEventManager.html">EventManager</a>;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="foldopen" id="foldopen00307" data-start="{" data-end="};">
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno"><a class="line" href="classRegistry.html">  307</a></span><span class="keyword">class </span><a class="code hl_class" href="classRegistry.html">Registry</a></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>{</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>  <span class="comment">// ========================================================================</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>  <span class="comment">// COMPONENT REGISTRATION AND ACCESS</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>  <span class="comment">// ========================================================================</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>  <span class="keyword">template</span>&lt;component Component&gt;</div>
<div class="foldopen" id="foldopen00329" data-start="{" data-end="}">
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno"><a class="line" href="classRegistry.html#aa3c7728231c60cf0e6742d693aa50bbf">  329</a></span>  <a class="code hl_class" href="classSparseArray.html">SparseArray&lt;Component&gt;</a>&amp; <a class="code hl_function" href="classRegistry.html#aa3c7728231c60cf0e6742d693aa50bbf">register_component</a>(std::string <span class="keyword">const</span>&amp; string_id)</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>  {</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    std::type_index ti(<span class="keyword">typeid</span>(Component));</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    this-&gt;_components.insert_or_assign(ti, <a class="code hl_class" href="classSparseArray.html">SparseArray&lt;Component&gt;</a>());</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <a class="code hl_class" href="classSparseArray.html">SparseArray&lt;Component&gt;</a>&amp; comp = this-&gt;get_components&lt;Component&gt;();</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    this-&gt;_delete_functions.insert_or_assign(</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        ti, [&amp;comp](Entity <span class="keyword">const</span>&amp; e) { comp.<a class="code hl_function" href="classSparseArray.html#a99d034602342854d7510793d0d7cde49">erase</a>(e); });</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    this-&gt;_emplace_functions.insert_or_assign(</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        ti,</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        [&amp;comp](Entity <span class="keyword">const</span>&amp; e, <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> <span class="keyword">const</span>&amp; bytes)</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        { comp.<a class="code hl_function" href="classSparseArray.html#a8d98f67cdc28187603f0cb5704fc6187">insert_at</a>(e, bytes); });</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    this-&gt;_comp_entity_converters.insert_or_assign(</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        string_id,</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        [](<a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> <span class="keyword">const</span>&amp; b, std::unordered_map&lt;Entity, Entity&gt; <span class="keyword">const</span>&amp; map)</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        { <span class="keywordflow">return</span> Component(b).change_entity(map).to_bytes(); });</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    this-&gt;_state_getters.insert_or_assign(</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        ti,</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        [&amp;comp, string_id]()</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        {</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>          <a class="code hl_struct" href="structComponentState.html">ComponentState</a> r(string_id);</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>          <span class="keywordflow">for</span> (std::size_t i = 0; i &lt; comp.size(); i++) {</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>            <span class="keywordflow">if</span> (comp[i]) {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>              r.<a class="code hl_variable" href="structComponentState.html#a8ef40682f2afd2813810875c4f2fbb19">comps</a>.emplace_back(i, comp[i]-&gt;to_bytes());</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>          }</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>          <span class="keywordflow">return</span> r;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        });</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    this-&gt;_component_bytes_getters.insert_or_assign(</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        string_id,</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        [&amp;comp](Entity <span class="keyword">const</span>&amp; e)</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>          std::optional&lt;ByteArray&gt; data;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>          <span class="keywordflow">if</span> (e &lt; comp.size() &amp;&amp; comp[e].has_value()) {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            data.emplace(comp[e]-&gt;to_bytes());</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>          }</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>          <span class="keywordflow">return</span> data;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        });</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    this-&gt;_component_getter.insert_or_assign(</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        ti,</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        [&amp;comp](Entity entity) -&gt; std::optional&lt;ByteArray&gt;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>          <span class="keywordflow">if</span> (comp.size() &lt;= entity || !comp[entity]) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>          }</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>          <span class="keywordflow">return</span> comp[entity]-&gt;to_bytes();</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        });</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    this-&gt;_index_getter.<a class="code hl_function" href="classTwoWayMap.html#a16bd3313c2cae823c5ad48d15ce003b2">insert</a>(ti, string_id);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <span class="keywordflow">return</span> comp;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>  }</div>
</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>  <span class="keyword">template</span>&lt;<span class="keyword">class</span> Component&gt;</div>
<div class="foldopen" id="foldopen00396" data-start="{" data-end="}">
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno"><a class="line" href="classRegistry.html#ab8ff3522b765d882b46262ad345db07b">  396</a></span>  <a class="code hl_class" href="classSparseArray.html">SparseArray&lt;Component&gt;</a>&amp; <a class="code hl_function" href="classRegistry.html#ab8ff3522b765d882b46262ad345db07b">get_components</a>()</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>  {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordflow">return</span> std::any_cast&lt;SparseArray&lt;Component&gt;&amp;&gt;(</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        this-&gt;_components.at(std::type_index(<span class="keyword">typeid</span>(Component))));</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>  }</div>
</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>  <span class="keyword">template</span>&lt;<span class="keyword">class</span> Component&gt;</div>
<div class="foldopen" id="foldopen00407" data-start="{" data-end="}">
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno"><a class="line" href="classRegistry.html#afdce4af207b1240a6c10b83ad66cc4b4">  407</a></span>  <a class="code hl_class" href="classSparseArray.html">SparseArray&lt;Component&gt;</a> <span class="keyword">const</span>&amp; <a class="code hl_function" href="classRegistry.html#afdce4af207b1240a6c10b83ad66cc4b4">get_components</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span><span class="keyword">  </span>{</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keywordflow">return</span> std::any_cast&lt;const SparseArray&lt;Component&gt;&amp;&gt;(</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        this-&gt;_components.at(std::type_index(<span class="keyword">typeid</span>(Component))));</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>  }</div>
</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span> </div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  <span class="keyword">template</span>&lt;<span class="keyword">class</span>... Component&gt;</div>
<div class="foldopen" id="foldopen00443" data-start="{" data-end="}">
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno"><a class="line" href="classRegistry.html#a0ebe63c781a345ce210cfcfa5da3fcae">  443</a></span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classRegistry.html#a0ebe63c781a345ce210cfcfa5da3fcae">has_component</a>(<span class="keyword">const</span> Entity&amp; e)<span class="keyword"> const</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span><span class="keyword">  </span>{</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <span class="keywordflow">return</span> ((</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                [<span class="keyword">this</span>, e]()</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>                {</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>                  <a class="code hl_class" href="classSparseArray.html">SparseArray&lt;Component&gt;</a> <span class="keyword">const</span>&amp; comp =</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>                      this-&gt;get_components&lt;Component&gt;();</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                  <span class="keywordflow">return</span> (e &lt; comp.size() &amp;&amp; comp[e].has_value());</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                })()</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>            &amp;&amp; ...);</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>  }</div>
</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>  <span class="comment">// ========================================================================</span></div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="comment">// ENTITY MANAGEMENT</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>  <span class="comment">// ========================================================================</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span> </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>  Entity <a class="code hl_function" href="classRegistry.html#a2e982e5c9b7207dce933e2210b4cce4b">spawn_entity</a>();</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a9f8e76e4f67a4e33dd7273d065d6be7a">kill_entity</a>(Entity <span class="keyword">const</span>&amp; e);</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classRegistry.html#ac4b33f8cf1890733209cf94c0d15da4f">is_entity_dying</a>(Entity <span class="keyword">const</span>&amp; e) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span> </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a2cf00a9ea3b232b551de02598cbc7756">process_entity_deletions</a>();</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span> </div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>  <span class="comment">// ========================================================================</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>  <span class="comment">// COMPONENT ADDITION AND REMOVAL</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>  <span class="comment">// ========================================================================</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span> </div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>  <span class="keyword">template</span>&lt;component Component&gt;</div>
<div class="foldopen" id="foldopen00673" data-start="{" data-end="}">
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno"><a class="line" href="classRegistry.html#a9990d86dfe7f90e314f8e93773b307d4">  673</a></span>  <span class="keyword">typename</span> <a class="code hl_typedef" href="classSparseArray.html#afcb68b007a0a116f234324bcc5a27ffc">SparseArray&lt;Component&gt;::Ref</a> <a class="code hl_function" href="classRegistry.html#a9990d86dfe7f90e314f8e93773b307d4">add_component</a>(Entity <span class="keyword">const</span>&amp; to,</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>                                                     Component&amp;&amp; c)</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>  {</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <span class="keywordflow">return</span> this-&gt;get_components&lt;Component&gt;().insert_at(</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        to, std::forward&lt;Component&gt;(c));</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>  }</div>
</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Component, <span class="keyword">typename</span>... Params&gt;</div>
<div class="foldopen" id="foldopen00725" data-start="{" data-end="}">
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno"><a class="line" href="classRegistry.html#aedaff3e905a52a1945250cd16ffbb5fb">  725</a></span>  <span class="keyword">typename</span> <a class="code hl_typedef" href="classSparseArray.html#afcb68b007a0a116f234324bcc5a27ffc">SparseArray&lt;Component&gt;::Ref</a> <a class="code hl_function" href="classRegistry.html#aedaff3e905a52a1945250cd16ffbb5fb">emplace_component</a>(Entity <span class="keyword">const</span>&amp; to,</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>                                                         Params&amp;&amp;... p)</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>  {</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    <span class="keywordflow">return</span> this-&gt;get_components&lt;Component&gt;().insert_at(</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        to, std::forward&lt;Params&gt;(p)...);</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>  }</div>
</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span> </div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#aedaff3e905a52a1945250cd16ffbb5fb">emplace_component</a>(Entity <span class="keyword">const</span>&amp; to,</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>                         std::string <span class="keyword">const</span>&amp; string_id,</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>                         <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> <span class="keyword">const</span>&amp; bytes);</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span> </div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Component&gt;</div>
<div class="foldopen" id="foldopen00818" data-start="{" data-end="}">
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno"><a class="line" href="classRegistry.html#ae83c694e0e30125b850edcc343406b76">  818</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#ae83c694e0e30125b850edcc343406b76">remove_component</a>(Entity <span class="keyword">const</span>&amp; from)</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>  {</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    <span class="keywordflow">if</span> (!this-&gt;has_component&lt;Component&gt;(from)) {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    }</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>    this-&gt;get_components&lt;Component&gt;().erase(from);</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>  }</div>
</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span> </div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>  <span class="keyword">template</span>&lt;<span class="keyword">class</span>... Components, <span class="keyword">typename</span> Function&gt;</div>
<div class="foldopen" id="foldopen00834" data-start="{" data-end="}">
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno"><a class="line" href="classRegistry.html#aee1a7222875fdfa2859b6470a741b66e">  834</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#aee1a7222875fdfa2859b6470a741b66e">add_system</a>(Function&amp;&amp; f, std::size_t priority = 0)</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>  {</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    <a class="code hl_class" href="classSystem.html">System&lt;&gt;</a> sys([<span class="keyword">this</span>, f = std::forward&lt;Function&gt;(f)]()</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>                 { f(*<span class="keyword">this</span>, this-&gt;get_components&lt;Components&gt;()...); },</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>                 priority);</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    <span class="keyword">auto</span> it = std::upper_bound(</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        this-&gt;_frequent_systems.begin(), this-&gt;_frequent_systems.end(), sys);</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    this-&gt;_frequent_systems.insert(it, std::move(sys));</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>  }</div>
</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span> </div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>  <span class="comment">// ========================================================================</span></div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>  <span class="comment">// SYSTEM MANAGEMENT</span></div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>  <span class="comment">// ========================================================================</span></div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#ae484ce9b1fdb58e76997409a74227701">run_systems</a>(<a class="code hl_class" href="classEventManager.html">EventManager</a>&amp;);</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span> </div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#ae99ff1a3c4f750cba3bb80534f4295c4">update_bindings</a>(<a class="code hl_class" href="classEventManager.html">EventManager</a>&amp;);</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span> </div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>  <span class="keyword">template</span>&lt;component ComponentType, <span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen01066" data-start="{" data-end="}">
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"><a class="line" href="classRegistry.html#a529bdf9002188825f7b03f33b2991624"> 1066</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a529bdf9002188825f7b03f33b2991624">register_binding</a>(Entity entity,  <span class="comment">// NOLINT</span></div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                        std::string <span class="keyword">const</span>&amp; field_name,</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                        std::string <span class="keyword">const</span>&amp; source_hook)</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>  {</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    std::type_index ti(<span class="keyword">typeid</span>(ComponentType));</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span> </div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    <span class="comment">// Parse hook reference: &quot;scope:component:field&quot;</span></div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>    std::string scope;</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>    std::string comp_name;</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>    std::string value_name;</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span> </div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    <span class="keywordtype">size_t</span> first_colon = source_hook.find(<span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>    <span class="keywordtype">size_t</span> second_colon = source_hook.find(<span class="charliteral">&#39;:&#39;</span>, first_colon + 1);</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span> </div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>    <span class="keywordflow">if</span> (first_colon != std::string::npos &amp;&amp; second_colon != std::string::npos) {</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>      scope = source_hook.substr(0, first_colon);</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>      comp_name =</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>          source_hook.substr(first_colon + 1, second_colon - first_colon - 1);</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>      value_name = source_hook.substr(second_colon + 1);</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>      scope = <span class="stringliteral">&quot;self&quot;</span>;</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>      <span class="keywordtype">size_t</span> colon_pos = source_hook.find(<span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>      <span class="keywordflow">if</span> (colon_pos != std::string::npos) {</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        comp_name = source_hook.substr(0, colon_pos);</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>        value_name = source_hook.substr(colon_pos + 1);</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Invalid hook format: &quot;</span> &lt;&lt; source_hook &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>      }</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>    }</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span> </div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>    std::function&lt;void()&gt; updater =</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>        [<span class="keyword">this</span>, entity, field_name, scope, comp_name, value_name]()</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>    {</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>        std::optional&lt;std::reference_wrapper&lt;T&gt;&gt; ref;</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span> </div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>        <span class="keywordflow">if</span> (scope == <span class="stringliteral">&quot;self&quot;</span>) {</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>          std::string hook_key = comp_name + <span class="stringliteral">&quot;{&quot;</span> + std::to_string(entity) + <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>          ref = this-&gt;get_hooked_value&lt;T&gt;(hook_key, value_name);</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scope == <span class="stringliteral">&quot;global&quot;</span>) {</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>          <span class="keyword">auto</span> it = this-&gt;_global_hooks.find(comp_name);</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>          <span class="keywordflow">if</span> (it != this-&gt;_global_hooks.end()) {</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>            <span class="keyword">auto</span> any_val = it-&gt;second(value_name);</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>            <span class="keywordflow">if</span> (any_val.has_value()) {</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>              ref = std::any_cast&lt;std::reference_wrapper&lt;T&gt;&gt;(any_val.value());</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>            }</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>            std::cerr &lt;&lt; <span class="stringliteral">&quot;Unknown global hook: &quot;</span> &lt;&lt; comp_name</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>                      &lt;&lt; <span class="stringliteral">&quot; the syntax is \&quot;global_hook\&quot;: true&quot;</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>          }</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>          std::cerr &lt;&lt; <span class="stringliteral">&quot;Unknown scope: &quot;</span> &lt;&lt; scope &lt;&lt; <span class="stringliteral">&quot; on comp name &quot;</span></div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                    &lt;&lt; comp_name &lt;&lt; <span class="stringliteral">&quot; and value &quot;</span> &lt;&lt; value_name &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>        }</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span> </div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>        <span class="keywordflow">if</span> (ref.has_value()) {</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>          <span class="keyword">auto</span>&amp; components = this-&gt;get_components&lt;ComponentType&gt;();</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>          <span class="keywordflow">if</span> (entity &lt; components.size() &amp;&amp; components[entity].has_value()) {</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>            <span class="keyword">auto</span>&amp; target_comp = components[entity].value();</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span> </div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>            <span class="keyword">auto</span>&amp; hook_map = ComponentType::hook_map();</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>            <span class="keywordflow">if</span> (hook_map.contains(field_name)) {</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>              std::any field_any = hook_map.at(field_name)(target_comp);</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>              <span class="keyword">auto</span> field_ref_wrapper =</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>                  std::any_cast&lt;std::reference_wrapper&lt;T&gt;&gt;(field_any);</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>              field_ref_wrapper.get() = ref.value().get();</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>            }</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>          }</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>        }</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>      } <span class="keywordflow">catch</span> (std::bad_any_cast <span class="keyword">const</span>&amp; e) {</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>        <span class="comment">// Type mismatch in hook binding - field type doesn&#39;t match hooked value</span></div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>      } <span class="keywordflow">catch</span> (std::out_of_range <span class="keyword">const</span>&amp; e) {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>        <span class="comment">// Hook field not found or invalid hook string format</span></div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>      }</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>    };</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span> </div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    std::function&lt;<a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a>()&gt; serializer = [<span class="keyword">this</span>, entity]()</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>    {</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>      <span class="keyword">auto</span>&amp; components = this-&gt;get_components&lt;ComponentType&gt;();</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>      <span class="keywordflow">if</span> (entity &lt; components.size() &amp;&amp; components[entity].has_value()) {</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>        <span class="keywordflow">return</span> components[entity]-&gt;to_bytes();</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>      }</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>      <span class="keywordflow">return</span> <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> {};</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>    };</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span> </div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>    std::function&lt;void()&gt; deleter = [<span class="keyword">this</span>, entity, scope, comp_name]()</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>    {</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>      <span class="keywordflow">if</span> (scope == <span class="stringliteral">&quot;self&quot;</span>) {</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        std::string hook_name = comp_name + <span class="stringliteral">&quot;{&quot;</span> + std::to_string(entity) + <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>        this-&gt;_hooked_components.erase(hook_name);</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>      }</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>    };</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span> </div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>    _bindings.emplace_back(entity,</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>                           ti,</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>                           field_name,</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>                           source_hook,</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>                           std::move(updater),</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>                           std::move(deleter),</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>                           std::move(serializer));</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>  }</div>
</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span> </div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#ab44989c0361996ad2c4aefbf4636b664">clear_bindings</a>();</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span> </div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>  <span class="comment">// ============================================================================</span></div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>  <span class="comment">// SCENE MANAGEMENT</span></div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>  <span class="comment">// ============================================================================</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>  <span class="comment">// Multi-scene system for organizing entities into logical layers.</span></div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>  <span class="comment">// Scenes allow you to organize entities into separate contexts (menu,</span></div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>  <span class="comment">// gameplay, HUD, pause screen, etc.). Each scene has a state (ACTIVE,</span></div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>  <span class="comment">// DISABLED) that controls whether its entities are processed by systems.</span></div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>  <span class="comment">// Scene States:</span></div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>  <span class="comment">// - ACTIVE: Scene is active, entities are processed by systems</span></div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>  <span class="comment">// - DISABLED: Scene exists but entities are not processed</span></div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>  <span class="comment">// - ACTIVE: Scene is active and entities are processed</span></div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>  <span class="comment">// - MAIN: Primary active scene, always processed (highest priority)</span></div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>  <span class="comment">// System Iteration:</span></div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>  <span class="comment">// The Zipper class automatically filters entities - systems only iterate over</span></div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>  <span class="comment">// entities in ACTIVE and MAIN scenes by default. DISABLED scenes are skipped</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>  <span class="comment">// entirely.</span></div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>  <span class="comment">// Common Patterns:</span></div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>  <span class="comment">// - Gameplay + HUD: Both scenes ACTIVE</span></div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>  <span class="comment">// - Menu switching: Deactivate old scene, activate new scene</span></div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>  <span class="comment">// - Pause overlay: Push pause scene on top of gameplay (both ACTIVE)</span></div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>  <span class="comment">// - Scene stacking: Multiple ACTIVE scenes processed together</span></div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>  <span class="comment">// Scene Lifecycle:</span></div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>  <span class="comment">// 1. add_scene() - Register scene with initial state (default DISABLED)</span></div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>  <span class="comment">// 2. activate_scene() - Make scene active</span></div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>  <span class="comment">// 3. deactivate_scene() - Make scene inactive</span></div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>  <span class="comment">// 4. push_scene()/pop_scene() - Stack-based scene management</span></div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>  <span class="comment">// 5. deactivate_all_scenes() - Clear all active scenes</span></div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span> </div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#adfbcd0eed55c7f0d795443ef0f34c855">add_scene</a>(std::string <span class="keyword">const</span>&amp; scene_name,</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>                 <a class="code hl_enumeration" href="Scenes_8hpp.html#ab0d98f61608665befb0dc9afa0419e19">SceneState</a> state = <a class="code hl_enumvalue" href="Scenes_8hpp.html#ab0d98f61608665befb0dc9afa0419e19a055c1a591abb0e8cd86dc969727bcc0b">SceneState::DISABLED</a>);</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span> </div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a676be837cc2defb394f38b32d664fd30">init_scene_management</a>();</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span> </div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a35e8c1f487a94aaf2752678d814a942a">setup_scene_systems</a>();</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span> </div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#ad1c9d136cf9da966ef0977d3c698a963">set_current_scene</a>(std::string <span class="keyword">const</span>&amp; scene_name);</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span> </div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a9fbf6f291355b03ad61105e4ba682299">set_main_scene</a>(std::string <span class="keyword">const</span>&amp; scene_name);</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span> </div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a936cd3eebe707ee32e2aac62eb079404">remove_current_scene</a>(std::string <span class="keyword">const</span>&amp; scene_name);</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span> </div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#aa3aabe22621e394e0e17f2f2b35a59c8">remove_all_scenes</a>();</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span> </div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>  std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; <a class="code hl_function" href="classRegistry.html#a0b9eb2723831a87cb5602c43e2b05b0a">get_current_scene</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span> </div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#af5df0cfd429a13867b1b490b996c3e8a">activate_scene</a>(std::string <span class="keyword">const</span>&amp; scene_name);</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span> </div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a754e4ccdcfee754754956ba903a86fd2">deactivate_scene</a>(std::string <span class="keyword">const</span>&amp; scene_name);</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span> </div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a08789766bb87dcda9159cc2405249b32">deactivate_all_scenes</a>();</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span> </div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a42a2427184d9f6bcfef9a5addfe9511e">push_scene</a>(std::string <span class="keyword">const</span>&amp; scene_name);</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span> </div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a348496c10466004c5b009e1534202f5d">pop_scene</a>(std::string <span class="keyword">const</span>&amp; scene_name);</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span> </div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classRegistry.html#a6dea4f9463f5e582337406da60b721e6">is_scene_active</a>(std::string <span class="keyword">const</span>&amp; scene_name) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span> </div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>  <a class="code hl_enumeration" href="Scenes_8hpp.html#ab0d98f61608665befb0dc9afa0419e19">SceneState</a> <a class="code hl_function" href="classRegistry.html#a1218f67393c0188a60c152126a1a5e09">get_scene_state</a>(std::string <span class="keyword">const</span>&amp; scene_name) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span> </div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>  std::unordered_set&lt;std::string&gt; <span class="keyword">const</span>&amp; <a class="code hl_function" href="classRegistry.html#a4ea8e3e48003a382c1391520a5e2dfba">get_active_scenes_set</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span> </div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>  std::unordered_map&lt;std::string, SceneState&gt; <span class="keyword">const</span>&amp; <a class="code hl_function" href="classRegistry.html#aed58f4389647aadc67b76a5db4e20bb3">get_scene_states</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span> </div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>  std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; <a class="code hl_function" href="classRegistry.html#a0587e564fe1a32917b6cf4d5860be9ba">get_active_scenes</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span> </div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classRegistry.html#ad53c13e55864ae8333a766563d8167cc">is_in_main_scene</a>(Entity);</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span> </div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>  <a class="code hl_class" href="classClock.html">Clock</a>&amp; <a class="code hl_function" href="classRegistry.html#a350fe0f552eb16cde1a56d3a871983f4">clock</a>();</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span> </div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>  <span class="keyword">const</span> <a class="code hl_class" href="classClock.html">Clock</a>&amp; <a class="code hl_function" href="classRegistry.html#a350fe0f552eb16cde1a56d3a871983f4">clock</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span> </div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>  <span class="comment">// ============================================================================</span></div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>  <span class="comment">// HOOK SYSTEM</span></div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>  <span class="comment">// ============================================================================</span></div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span> </div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>  <span class="comment">// Hooks enable components to expose fields for runtime reflection and data</span></div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>  <span class="comment">// binding. This powers JSON configuration, network synchronization, and</span></div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>  <span class="comment">// dynamic component-to-component data flow.</span></div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>  <span class="comment">// Hook Registration:</span></div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>  <span class="comment">// Components declare hookable fields using HOOKABLE() macro:</span></div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>  <span class="comment">//   HOOKABLE(Position, HOOK(x), HOOK(y))</span></div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>  <span class="comment">// This creates a static hook_map() returning field accessors.</span></div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>  <span class="comment">// Hook Usage:</span></div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>  <span class="comment">// 1. register_hook&lt;Component&gt;(&quot;name&quot;, entity) - Make component fields</span></div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>  <span class="comment">// accessible</span></div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>  <span class="comment">// 2. get_hooked_value&lt;T&gt;(&quot;name&quot;, &quot;field&quot;) - Read field value by string name</span></div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>  <span class="comment">// Hook Applications:</span></div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>  <span class="comment">// - JSON configuration: &quot;%Player:maxSpeed&quot; reads Player component&#39;s maxSpeed</span></div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>  <span class="comment">// - Dynamic bindings: &quot;#Leader:pos&quot; creates live binding to Leader&#39;s position</span></div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>  <span class="comment">// - Network sync: Serialize/deserialize specific fields by name</span></div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>  <span class="comment">// - Runtime introspection: Query component state without compile-time</span></div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>  <span class="comment">// knowledge</span></div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>  <span class="comment">// Hook Naming:</span></div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>  <span class="comment">// The &quot;name&quot; parameter is a user-defined identifier (often entity name or</span></div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>  <span class="comment">// role). Multiple entities can have hooks with different names pointing to</span></div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>  <span class="comment">// same component type.</span></div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>  <span class="comment">//</span></div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>  <span class="comment">//   register_hook&lt;Position&gt;(&quot;player1&quot;, player1_entity)</span></div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>  <span class="comment">//   register_hook&lt;Position&gt;(&quot;player2&quot;, player2_entity)</span></div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>  <span class="comment">//   auto p1_x = get_hooked_value&lt;float&gt;(&quot;player1&quot;, &quot;x&quot;)</span></div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>  <span class="comment">//   auto p2_x = get_hooked_value&lt;float&gt;(&quot;player2&quot;, &quot;x&quot;)</span></div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span> </div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>  <span class="keyword">template</span>&lt;hookable T&gt;</div>
<div class="foldopen" id="foldopen01729" data-start="{" data-end="}">
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"><a class="line" href="classRegistry.html#a988dbbf41e2d34202090c4b47a17d4f7"> 1729</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a988dbbf41e2d34202090c4b47a17d4f7">register_hook</a>(std::string name, Entity <span class="keyword">const</span>&amp; e)</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>  {</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>    this-&gt;_hooked_components.insert_or_assign(</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>        (name + <span class="stringliteral">&quot;{&quot;</span> + std::to_string(e) + <span class="stringliteral">&quot;}&quot;</span>),</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>        [<span class="keyword">this</span>, e](std::string <span class="keyword">const</span>&amp; key) -&gt; std::optional&lt;std::any&gt;</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>        {</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>          <span class="keyword">auto</span>&amp; array = this-&gt;get_components&lt;T&gt;();</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>          <span class="keyword">auto</span>&amp; comp = array[e];</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>          <span class="keywordflow">if</span> (!comp.has_value()) {</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>          }</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>          <span class="keywordflow">return</span> T::hook_map().at(key)(comp.value());</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>        });</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>  }</div>
</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span> </div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>  <span class="keyword">template</span>&lt;hookable T&gt;</div>
<div class="foldopen" id="foldopen01769" data-start="{" data-end="}">
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"><a class="line" href="classRegistry.html#af774fbeb95691f112557590f04e5f150"> 1769</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#af774fbeb95691f112557590f04e5f150">register_global_hook</a>(std::string <span class="keyword">const</span>&amp; name, Entity <span class="keyword">const</span>&amp; e)</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>  {</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>    this-&gt;_global_hooks.insert_or_assign(</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>        name,</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>        [<span class="keyword">this</span>, e](std::string <span class="keyword">const</span>&amp; key) -&gt; std::optional&lt;std::any&gt;</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        {</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>          <span class="keyword">auto</span>&amp; array = this-&gt;get_components&lt;T&gt;();</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>          <span class="keywordflow">if</span> (e &gt;= array.size() || !array[e].has_value()) {</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>          }</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>          <span class="keywordflow">return</span> T::hook_map().at(key)(array[e].value());</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>        });</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>  }</div>
</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span> </div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen01893" data-start="{" data-end="}">
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"><a class="line" href="classRegistry.html#a3c5b1d39982cf8c8a5159f048478faf9"> 1893</a></span>  std::optional&lt;std::reference_wrapper&lt;T&gt;&gt; <a class="code hl_function" href="classRegistry.html#a3c5b1d39982cf8c8a5159f048478faf9">get_hooked_value</a>(</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>      std::string <span class="keyword">const</span>&amp; comp, std::string <span class="keyword">const</span>&amp; value)</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>  {</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>    <span class="keywordflow">if</span> (!this-&gt;_hooked_components.contains(comp)) {</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>    }</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span> </div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; tmp = std::any_cast&lt;std::optional&lt;std::any&gt;&gt;(</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>        this-&gt;_hooked_components.at(comp)(value));</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>    <span class="keywordflow">if</span> (!tmp.has_value()) {</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>    }</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>    <span class="keywordflow">return</span> std::any_cast&lt;std::reference_wrapper&lt;T&gt;&gt;(tmp.value());</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>  }</div>
</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span> </div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen01920" data-start="{" data-end="}">
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"><a class="line" href="classRegistry.html#aa4dd65895727f2f8c6c78b89f43d6fc3"> 1920</a></span>  std::optional&lt;std::reference_wrapper&lt;T&gt;&gt; <a class="code hl_function" href="classRegistry.html#aa4dd65895727f2f8c6c78b89f43d6fc3">get_global_hooked_value</a>(</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>      std::string <span class="keyword">const</span>&amp; name, std::string <span class="keyword">const</span>&amp; value)</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>  {</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>    <span class="keywordflow">if</span> (!this-&gt;_global_hooks.contains(name)) {</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>    }</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span> </div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; tmp = std::any_cast&lt;std::optional&lt;std::any&gt;&gt;(</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>        this-&gt;_global_hooks.at(name)(value));</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>    <span class="keywordflow">if</span> (!tmp.has_value()) {</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>    }</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>    <span class="keywordflow">return</span> std::any_cast&lt;std::reference_wrapper&lt;T&gt;&gt;(tmp.value());</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>  }</div>
</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span> </div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classRegistry.html#a0eb34875d2a3ade0c6114886e1b41afb">add_template</a>(std::string <span class="keyword">const</span>&amp; name,</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>                    JsonObject <span class="keyword">const</span>&amp; config,</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>                    JsonObject <span class="keyword">const</span>&amp; default_parameters = {});</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span> </div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>  JsonObject <a class="code hl_function" href="classRegistry.html#a110e0dd5709b1c0d0838155dbb5ddbbb">get_template</a>(std::string <span class="keyword">const</span>&amp; name,</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>                          JsonObject <span class="keyword">const</span>&amp; params = {});</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span> </div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classRegistry.html#aa173e9399b055aa64d39a86ebd0d90b9">is_in_current_cene</a>(Entity e);</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span> </div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>  <span class="comment">// ============================================================================</span></div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>  <span class="comment">// NETWORK SUPPORT</span></div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>  <span class="comment">// ============================================================================</span></div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>  <span class="comment">//</span></div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>  <span class="comment">// Entity ID mapping and state serialization for networked multiplayer.</span></div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>  <span class="comment">//</span></div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>  <span class="comment">// The Problem:</span></div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>  <span class="comment">// In multiplayer games, entity IDs differ between client and server. The</span></div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>  <span class="comment">// server spawns entity 5, but on the client it becomes entity 12. Events</span></div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>  <span class="comment">// and components referencing entity IDs must be translated when transmitted.</span></div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>  <span class="comment">//</span></div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>  <span class="comment">// Entity Conversion:</span></div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>  <span class="comment">// convert_event_entity() and convert_comp_entity() remap entity IDs in</span></div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>  <span class="comment">// serialized data using a provided mapping. This ensures events like</span></div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>  <span class="comment">// &quot;Player 5 shot Player 8&quot; are correctly translated to client IDs.</span></div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>  <span class="comment">//</span></div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>  <span class="comment">// State Synchronization:</span></div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>  <span class="comment">// get_state() captures the entire ECS state as serialized components.</span></div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>  <span class="comment">// This enables full state snapshots for:</span></div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>  <span class="comment">// - New player connection (send world state)</span></div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>  <span class="comment">// - Save/load functionality</span></div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>  <span class="comment">// - Replay recording</span></div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>  <span class="comment">// - State diffing/delta compression</span></div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>  <span class="comment">//</span></div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>  <span class="comment">// String Keys:</span></div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>  <span class="comment">// get_event_key() and get_component_key() return the string identifier for</span></div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>  <span class="comment">// a type. This is used for network protocols where types are sent as strings</span></div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>  <span class="comment">// rather than compile-time type information.</span></div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>  <span class="comment">//</span></div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>  <span class="comment">// Network Flow:</span></div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>  <span class="comment">// 1. Server emits event with server entity IDs</span></div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>  <span class="comment">// 2. convert_event_entity() remaps IDs to client space</span></div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>  <span class="comment">// 3. Client emits event with client entity IDs</span></div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>  <span class="comment">// 4. Systems process with local IDs</span></div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span> </div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>  <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> <a class="code hl_function" href="classRegistry.html#a649dbdf578a8498e6282d88a0d81d8d5">convert_comp_entity</a>(std::string <span class="keyword">const</span>&amp; <span class="keywordtype">id</span>,</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>                                <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> <span class="keyword">const</span>&amp; comp,</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>                                std::unordered_map&lt;Entity, Entity&gt; <span class="keyword">const</span>&amp; map);</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span> </div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>  <span class="keyword">template</span>&lt;component Component&gt;</div>
<div class="foldopen" id="foldopen02132" data-start="{" data-end="}">
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"><a class="line" href="classRegistry.html#a64c1066928e59a7aeb60ae79c08f1690"> 2132</a></span>  std::string <a class="code hl_function" href="classRegistry.html#a64c1066928e59a7aeb60ae79c08f1690">get_component_key</a>()</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>  {</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>    <span class="keywordflow">return</span> this-&gt;_index_getter.<a class="code hl_function" href="classTwoWayMap.html#a9cefc33de6ef6f7c30b129c8e2430ffb">at_first</a>(<span class="keyword">typeid</span>(Component));</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>  }</div>
</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span> </div>
<div class="foldopen" id="foldopen02137" data-start="{" data-end="}">
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"><a class="line" href="classRegistry.html#a8c5be2ddeaa3b9cbc659a24c7f290d4e"> 2137</a></span>  std::optional&lt;ByteArray&gt; <a class="code hl_function" href="classRegistry.html#a8c5be2ddeaa3b9cbc659a24c7f290d4e">get_component_bytes</a>(Entity entity,</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>                                               std::string <span class="keyword">const</span>&amp; component_key)</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>  {</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>    <span class="keyword">auto</span> it = this-&gt;_component_bytes_getters.find(component_key);</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>    <span class="keywordflow">if</span> (it == this-&gt;_component_bytes_getters.end()) {</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>    }</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>    <span class="keywordflow">return</span> it-&gt;second(entity);</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>  }</div>
</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span> </div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>  std::vector&lt;ComponentState&gt; <a class="code hl_function" href="classRegistry.html#aa1f44e83eaea9570fb48f4f20eeeb103">get_state</a>();</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span> </div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>  <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> <a class="code hl_function" href="classRegistry.html#acc30fce2d18248ba7e54d051fa4288d9">get_byte_entity</a>(Entity entity);</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span> </div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>  <span class="keyword">struct </span>Binding</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>  {</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>    Entity target_entity;  </div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>    std::type_index target_component;  </div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>    std::string target_field;  </div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>    std::string source_hook;  </div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>    std::function&lt;void()&gt; updater;  </div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>    std::function&lt;void()&gt; deleter;  </div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>    std::function&lt;<a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a>()&gt;</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>        serializer;  </div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>    <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a></div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>        last_serialized_value;  </div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>    <span class="keywordtype">bool</span> is_dirty = <span class="keyword">true</span>;  </div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span> </div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>    Binding(Entity e,</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>            std::type_index ti,</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>            std::string tf,</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>            std::string sh,</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>            std::function&lt;<span class="keywordtype">void</span>()&gt; u,</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>            std::function&lt;<span class="keywordtype">void</span>()&gt; d,</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>            std::function&lt;<a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a>()&gt; s)</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>        : target_entity(e)</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>        , target_component(ti)</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>        , target_field(std::move(tf))</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>        , source_hook(std::move(sh))</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>        , updater(std::move(u))</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>        , deleter(std::move(d))</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>        , serializer(std::move(s))</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>    {</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>    }</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span> </div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>    <span class="keywordtype">bool</span> update_and_check_dirty()</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>    {</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>      updater();</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>      <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> new_value = serializer();</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span> </div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>      <span class="keywordflow">if</span> (new_value != last_serialized_value || is_dirty) {</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>        last_serialized_value = std::move(new_value);</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>        is_dirty = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>      }</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>    }</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>  };</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span> </div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>  std::unordered_map&lt;std::type_index, std::any&gt; _components;</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>  std::unordered_map&lt;std::type_index, std::function&lt;void(Entity <span class="keyword">const</span>&amp;)&gt;&gt;</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>      _delete_functions;</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>  std::unordered_map&lt;std::type_index,</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>                     std::function&lt;void(Entity <span class="keyword">const</span>&amp;, <a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> <span class="keyword">const</span>&amp;)&gt;&gt;</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>      _emplace_functions;</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>  std::unordered_map&lt;std::type_index, std::function&lt;<a class="code hl_struct" href="structComponentState.html">ComponentState</a>()&gt;&gt;</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>      _state_getters;</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>  std::unordered_map&lt;std::string,</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>                     std::function&lt;std::optional&lt;ByteArray&gt;(Entity <span class="keyword">const</span>&amp;)&gt;&gt;</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>      _component_bytes_getters;</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>  std::unordered_map&lt;std::type_index,</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>                     std::function&lt;std::optional&lt;ByteArray&gt;(Entity)&gt;&gt;</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>      _component_getter;</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>  <a class="code hl_class" href="classTwoWayMap.html">TwoWayMap&lt;std::type_index, std::string&gt;</a> _index_getter;</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span> </div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>  std::unordered_map&lt;</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>      std::string,</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>      std::function&lt;<a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a>(<a class="code hl_typedef" href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a> <span class="keyword">const</span>&amp;,</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>                              std::unordered_map&lt;Entity, Entity&gt; <span class="keyword">const</span>&amp;)&gt;&gt;</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>      _comp_entity_converters;</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span> </div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>  std::vector&lt;System&lt;&gt;&gt; _frequent_systems;</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>  std::queue&lt;Entity&gt; _dead_entities;</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>  std::unordered_set&lt;Entity&gt; _entities_to_kill;</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>  <a class="code hl_class" href="classClock.html">Clock</a> _clock;</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>  std::size_t _max = 0;</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span> </div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>  std::unordered_map&lt;std::string, SceneState&gt; _scenes;</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>  std::vector&lt;std::string&gt; _current_scene;</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>  std::unordered_set&lt;std::string&gt; _active_scenes_set;  <span class="comment">// O(1) lookup for Zipper</span></div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>  std::list&lt;std::string&gt; _main_scene;</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span> </div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>  std::unordered_map&lt;std::string,</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>                     std::function&lt;std::optional&lt;std::any&gt;(std::string <span class="keyword">const</span>&amp;)&gt;&gt;</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>      _hooked_components;</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>  std::unordered_map&lt;std::string,</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>                     std::function&lt;std::optional&lt;std::any&gt;(std::string <span class="keyword">const</span>&amp;)&gt;&gt;</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>      _global_hooks;</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>  std::vector&lt;Binding&gt; _bindings;</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span> </div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>  <span class="keyword">struct </span>TemplateDefinition</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>  {</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>    JsonObject obj;</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>    JsonObject default_parameters;</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>  };</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span> </div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>  std::unordered_map&lt;std::string, TemplateDefinition&gt; _entities_templates;</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>};</div>
</div>
<div class="ttc" id="aByte_8hpp_html"><div class="ttname"><a href="Byte_8hpp.html">Byte.hpp</a></div><div class="ttdoc">Binary serialization system for network communication and persistence.</div></div>
<div class="ttc" id="aByte_8hpp_html_ae5dac5ad63f62fe37b5a8cfd8f269493"><div class="ttname"><a href="Byte_8hpp.html#ae5dac5ad63f62fe37b5a8cfd8f269493">ByteArray</a></div><div class="ttdeci">std::vector&lt; Byte &gt; ByteArray</div><div class="ttdef"><b>Definition</b> Byte.hpp:27</div></div>
<div class="ttc" id="aClock_8hpp_html"><div class="ttname"><a href="Clock_8hpp.html">Clock.hpp</a></div></div>
<div class="ttc" id="aComponentState_8hpp_html"><div class="ttname"><a href="ComponentState_8hpp.html">ComponentState.hpp</a></div><div class="ttdoc">Component state serialization structure.</div></div>
<div class="ttc" id="aEntity_8hpp_html"><div class="ttname"><a href="Entity_8hpp.html">Entity.hpp</a></div></div>
<div class="ttc" id="aEventConcept_8hpp_html"><div class="ttname"><a href="EventConcept_8hpp.html">EventConcept.hpp</a></div></div>
<div class="ttc" id="aHookConcept_8hpp_html"><div class="ttname"><a href="HookConcept_8hpp.html">HookConcept.hpp</a></div><div class="ttdoc">Concept definition for hookable component types.</div></div>
<div class="ttc" id="aScenes_8hpp_html"><div class="ttname"><a href="Scenes_8hpp.html">Scenes.hpp</a></div><div class="ttdoc">Scene management system for organizing entities into layers.</div></div>
<div class="ttc" id="aScenes_8hpp_html_ab0d98f61608665befb0dc9afa0419e19"><div class="ttname"><a href="Scenes_8hpp.html#ab0d98f61608665befb0dc9afa0419e19">SceneState</a></div><div class="ttdeci">SceneState</div><div class="ttdoc">Defines the activation state of a scene.</div><div class="ttdef"><b>Definition</b> Scenes.hpp:33</div></div>
<div class="ttc" id="aScenes_8hpp_html_ab0d98f61608665befb0dc9afa0419e19a055c1a591abb0e8cd86dc969727bcc0b"><div class="ttname"><a href="Scenes_8hpp.html#ab0d98f61608665befb0dc9afa0419e19a055c1a591abb0e8cd86dc969727bcc0b">SceneState::DISABLED</a></div><div class="ttdeci">@ DISABLED</div><div class="ttdoc">Scene is disabled, entities are not processed.</div></div>
<div class="ttc" id="aSparseArray_8hpp_html"><div class="ttname"><a href="SparseArray_8hpp.html">SparseArray.hpp</a></div></div>
<div class="ttc" id="aSystems_8hpp_html"><div class="ttname"><a href="Systems_8hpp.html">Systems.hpp</a></div><div class="ttdoc">System wrapper for ECS functionality.</div></div>
<div class="ttc" id="aTwoWayMap_8hpp_html"><div class="ttname"><a href="TwoWayMap_8hpp.html">TwoWayMap.hpp</a></div></div>
<div class="ttc" id="aclassClock_html"><div class="ttname"><a href="classClock.html">Clock</a></div><div class="ttdef"><b>Definition</b> Clock.hpp:6</div></div>
<div class="ttc" id="aclassEventManager_html"><div class="ttname"><a href="classEventManager.html">EventManager</a></div><div class="ttdef"><b>Definition</b> EventManager.hpp:62</div></div>
<div class="ttc" id="aclassRegistry_html"><div class="ttname"><a href="classRegistry.html">Registry</a></div><div class="ttdoc">The Registry class is the core of the ECS (Entity-Component-System) architecture.</div><div class="ttdef"><b>Definition</b> Registry.hpp:308</div></div>
<div class="ttc" id="aclassRegistry_html_a0587e564fe1a32917b6cf4d5860be9ba"><div class="ttname"><a href="classRegistry.html#a0587e564fe1a32917b6cf4d5860be9ba">Registry::get_active_scenes</a></div><div class="ttdeci">std::vector&lt; std::string &gt; const &amp; get_active_scenes() const</div><div class="ttdoc">Get list of currently active scene names (ordered).</div><div class="ttdef"><b>Definition</b> Registry.cpp:208</div></div>
<div class="ttc" id="aclassRegistry_html_a08789766bb87dcda9159cc2405249b32"><div class="ttname"><a href="classRegistry.html#a08789766bb87dcda9159cc2405249b32">Registry::deactivate_all_scenes</a></div><div class="ttdeci">void deactivate_all_scenes()</div><div class="ttdoc">Deactivate all scenes.</div><div class="ttdef"><b>Definition</b> Registry.cpp:166</div></div>
<div class="ttc" id="aclassRegistry_html_a0b9eb2723831a87cb5602c43e2b05b0a"><div class="ttname"><a href="classRegistry.html#a0b9eb2723831a87cb5602c43e2b05b0a">Registry::get_current_scene</a></div><div class="ttdeci">std::vector&lt; std::string &gt; const &amp; get_current_scene() const</div><div class="ttdoc">Get list of currently active scene names.</div><div class="ttdef"><b>Definition</b> Registry.cpp:234</div></div>
<div class="ttc" id="aclassRegistry_html_a0eb34875d2a3ade0c6114886e1b41afb"><div class="ttname"><a href="classRegistry.html#a0eb34875d2a3ade0c6114886e1b41afb">Registry::add_template</a></div><div class="ttdeci">void add_template(std::string const &amp;name, JsonObject const &amp;config, JsonObject const &amp;default_parameters={})</div><div class="ttdoc">Register an entity template for reuse.</div><div class="ttdef"><b>Definition</b> Registry.cpp:259</div></div>
<div class="ttc" id="aclassRegistry_html_a0ebe63c781a345ce210cfcfa5da3fcae"><div class="ttname"><a href="classRegistry.html#a0ebe63c781a345ce210cfcfa5da3fcae">Registry::has_component</a></div><div class="ttdeci">bool has_component(const Entity &amp;e) const</div><div class="ttdoc">Checks if an entity has all specified components.</div><div class="ttdef"><b>Definition</b> Registry.hpp:443</div></div>
<div class="ttc" id="aclassRegistry_html_a110e0dd5709b1c0d0838155dbb5ddbbb"><div class="ttname"><a href="classRegistry.html#a110e0dd5709b1c0d0838155dbb5ddbbb">Registry::get_template</a></div><div class="ttdeci">JsonObject get_template(std::string const &amp;name, JsonObject const &amp;params={})</div><div class="ttdoc">Retrieve a registered entity template.</div><div class="ttdef"><b>Definition</b> Registry.cpp:267</div></div>
<div class="ttc" id="aclassRegistry_html_a1218f67393c0188a60c152126a1a5e09"><div class="ttname"><a href="classRegistry.html#a1218f67393c0188a60c152126a1a5e09">Registry::get_scene_state</a></div><div class="ttdeci">SceneState get_scene_state(std::string const &amp;scene_name) const</div><div class="ttdoc">Get the state of a scene.</div><div class="ttdef"><b>Definition</b> Registry.cpp:191</div></div>
<div class="ttc" id="aclassRegistry_html_a2cf00a9ea3b232b551de02598cbc7756"><div class="ttname"><a href="classRegistry.html#a2cf00a9ea3b232b551de02598cbc7756">Registry::process_entity_deletions</a></div><div class="ttdeci">void process_entity_deletions()</div><div class="ttdoc">Deletes all entities marked for killing.</div><div class="ttdef"><b>Definition</b> Registry.cpp:41</div></div>
<div class="ttc" id="aclassRegistry_html_a2e982e5c9b7207dce933e2210b4cce4b"><div class="ttname"><a href="classRegistry.html#a2e982e5c9b7207dce933e2210b4cce4b">Registry::spawn_entity</a></div><div class="ttdeci">Entity spawn_entity()</div><div class="ttdoc">Spawns a new entity.</div><div class="ttdef"><b>Definition</b> Registry.cpp:18</div></div>
<div class="ttc" id="aclassRegistry_html_a348496c10466004c5b009e1534202f5d"><div class="ttname"><a href="classRegistry.html#a348496c10466004c5b009e1534202f5d">Registry::pop_scene</a></div><div class="ttdeci">void pop_scene(std::string const &amp;scene_name)</div><div class="ttdoc">Pop a scene from the active scene stack.</div><div class="ttdef"><b>Definition</b> Registry.cpp:181</div></div>
<div class="ttc" id="aclassRegistry_html_a350fe0f552eb16cde1a56d3a871983f4"><div class="ttname"><a href="classRegistry.html#a350fe0f552eb16cde1a56d3a871983f4">Registry::clock</a></div><div class="ttdeci">Clock &amp; clock()</div><div class="ttdef"><b>Definition</b> Registry.cpp:249</div></div>
<div class="ttc" id="aclassRegistry_html_a35e8c1f487a94aaf2752678d814a942a"><div class="ttname"><a href="classRegistry.html#a35e8c1f487a94aaf2752678d814a942a">Registry::setup_scene_systems</a></div><div class="ttdeci">void setup_scene_systems()</div><div class="ttdoc">Setup automatic scene management systems.</div><div class="ttdef"><b>Definition</b> Registry.cpp:124</div></div>
<div class="ttc" id="aclassRegistry_html_a3c5b1d39982cf8c8a5159f048478faf9"><div class="ttname"><a href="classRegistry.html#a3c5b1d39982cf8c8a5159f048478faf9">Registry::get_hooked_value</a></div><div class="ttdeci">std::optional&lt; std::reference_wrapper&lt; T &gt; &gt; get_hooked_value(std::string const &amp;comp, std::string const &amp;value)</div><div class="ttdoc">Retrieve a reference to a hooked component field.</div><div class="ttdef"><b>Definition</b> Registry.hpp:1893</div></div>
<div class="ttc" id="aclassRegistry_html_a42a2427184d9f6bcfef9a5addfe9511e"><div class="ttname"><a href="classRegistry.html#a42a2427184d9f6bcfef9a5addfe9511e">Registry::push_scene</a></div><div class="ttdeci">void push_scene(std::string const &amp;scene_name)</div><div class="ttdoc">Push a scene onto the active scene stack.</div><div class="ttdef"><b>Definition</b> Registry.cpp:176</div></div>
<div class="ttc" id="aclassRegistry_html_a4ea8e3e48003a382c1391520a5e2dfba"><div class="ttname"><a href="classRegistry.html#a4ea8e3e48003a382c1391520a5e2dfba">Registry::get_active_scenes_set</a></div><div class="ttdeci">std::unordered_set&lt; std::string &gt; const &amp; get_active_scenes_set() const</div><div class="ttdoc">Get the set of active scene names for O(1) lookups.</div><div class="ttdef"><b>Definition</b> Registry.cpp:197</div></div>
<div class="ttc" id="aclassRegistry_html_a529bdf9002188825f7b03f33b2991624"><div class="ttname"><a href="classRegistry.html#a529bdf9002188825f7b03f33b2991624">Registry::register_binding</a></div><div class="ttdeci">void register_binding(Entity entity, std::string const &amp;field_name, std::string const &amp;source_hook)</div><div class="ttdoc">Registers a dynamic binding between component fields.</div><div class="ttdef"><b>Definition</b> Registry.hpp:1066</div></div>
<div class="ttc" id="aclassRegistry_html_a649dbdf578a8498e6282d88a0d81d8d5"><div class="ttname"><a href="classRegistry.html#a649dbdf578a8498e6282d88a0d81d8d5">Registry::convert_comp_entity</a></div><div class="ttdeci">ByteArray convert_comp_entity(std::string const &amp;id, ByteArray const &amp;comp, std::unordered_map&lt; Entity, Entity &gt; const &amp;map)</div><div class="ttdoc">Convert entity IDs in a serialized event using provided mapping.</div><div class="ttdef"><b>Definition</b> Registry.cpp:292</div></div>
<div class="ttc" id="aclassRegistry_html_a64c1066928e59a7aeb60ae79c08f1690"><div class="ttname"><a href="classRegistry.html#a64c1066928e59a7aeb60ae79c08f1690">Registry::get_component_key</a></div><div class="ttdeci">std::string get_component_key()</div><div class="ttdef"><b>Definition</b> Registry.hpp:2132</div></div>
<div class="ttc" id="aclassRegistry_html_a676be837cc2defb394f38b32d664fd30"><div class="ttname"><a href="classRegistry.html#a676be837cc2defb394f38b32d664fd30">Registry::init_scene_management</a></div><div class="ttdeci">void init_scene_management()</div><div class="ttdoc">Initialize the scene management system.</div><div class="ttdef"><b>Definition</b> Registry.cpp:119</div></div>
<div class="ttc" id="aclassRegistry_html_a6dea4f9463f5e582337406da60b721e6"><div class="ttname"><a href="classRegistry.html#a6dea4f9463f5e582337406da60b721e6">Registry::is_scene_active</a></div><div class="ttdeci">bool is_scene_active(std::string const &amp;scene_name) const</div><div class="ttdoc">Check if a scene is currently active.</div><div class="ttdef"><b>Definition</b> Registry.cpp:186</div></div>
<div class="ttc" id="aclassRegistry_html_a754e4ccdcfee754754956ba903a86fd2"><div class="ttname"><a href="classRegistry.html#a754e4ccdcfee754754956ba903a86fd2">Registry::deactivate_scene</a></div><div class="ttdeci">void deactivate_scene(std::string const &amp;scene_name)</div><div class="ttdoc">Deactivate a scene.</div><div class="ttdef"><b>Definition</b> Registry.cpp:153</div></div>
<div class="ttc" id="aclassRegistry_html_a8c5be2ddeaa3b9cbc659a24c7f290d4e"><div class="ttname"><a href="classRegistry.html#a8c5be2ddeaa3b9cbc659a24c7f290d4e">Registry::get_component_bytes</a></div><div class="ttdeci">std::optional&lt; ByteArray &gt; get_component_bytes(Entity entity, std::string const &amp;component_key)</div><div class="ttdef"><b>Definition</b> Registry.hpp:2137</div></div>
<div class="ttc" id="aclassRegistry_html_a936cd3eebe707ee32e2aac62eb079404"><div class="ttname"><a href="classRegistry.html#a936cd3eebe707ee32e2aac62eb079404">Registry::remove_current_scene</a></div><div class="ttdeci">void remove_current_scene(std::string const &amp;scene_name)</div><div class="ttdoc">Deactivate a specific scene.</div><div class="ttdef"><b>Definition</b> Registry.cpp:224</div></div>
<div class="ttc" id="aclassRegistry_html_a988dbbf41e2d34202090c4b47a17d4f7"><div class="ttname"><a href="classRegistry.html#a988dbbf41e2d34202090c4b47a17d4f7">Registry::register_hook</a></div><div class="ttdeci">void register_hook(std::string name, Entity const &amp;e)</div><div class="ttdoc">Register component hooks for runtime field access.</div><div class="ttdef"><b>Definition</b> Registry.hpp:1729</div></div>
<div class="ttc" id="aclassRegistry_html_a9990d86dfe7f90e314f8e93773b307d4"><div class="ttname"><a href="classRegistry.html#a9990d86dfe7f90e314f8e93773b307d4">Registry::add_component</a></div><div class="ttdeci">SparseArray&lt; Component &gt;::Ref add_component(Entity const &amp;to, Component &amp;&amp;c)</div><div class="ttdoc">Adds a component to an entity by moving.</div><div class="ttdef"><b>Definition</b> Registry.hpp:673</div></div>
<div class="ttc" id="aclassRegistry_html_a9f8e76e4f67a4e33dd7273d065d6be7a"><div class="ttname"><a href="classRegistry.html#a9f8e76e4f67a4e33dd7273d065d6be7a">Registry::kill_entity</a></div><div class="ttdeci">void kill_entity(Entity const &amp;e)</div><div class="ttdoc">Marks an entity for deletion.</div><div class="ttdef"><b>Definition</b> Registry.cpp:31</div></div>
<div class="ttc" id="aclassRegistry_html_a9fbf6f291355b03ad61105e4ba682299"><div class="ttname"><a href="classRegistry.html#a9fbf6f291355b03ad61105e4ba682299">Registry::set_main_scene</a></div><div class="ttdeci">void set_main_scene(std::string const &amp;scene_name)</div><div class="ttdoc">Set a scene as the MAIN scene.</div><div class="ttdef"><b>Definition</b> Registry.cpp:219</div></div>
<div class="ttc" id="aclassRegistry_html_aa173e9399b055aa64d39a86ebd0d90b9"><div class="ttname"><a href="classRegistry.html#aa173e9399b055aa64d39a86ebd0d90b9">Registry::is_in_current_cene</a></div><div class="ttdeci">bool is_in_current_cene(Entity e)</div><div class="ttdef"><b>Definition</b> Registry.cpp:283</div></div>
<div class="ttc" id="aclassRegistry_html_aa1f44e83eaea9570fb48f4f20eeeb103"><div class="ttname"><a href="classRegistry.html#aa1f44e83eaea9570fb48f4f20eeeb103">Registry::get_state</a></div><div class="ttdeci">std::vector&lt; ComponentState &gt; get_state()</div><div class="ttdoc">Get the complete ECS state as serialized components.</div><div class="ttdef"><b>Definition</b> Registry.cpp:300</div></div>
<div class="ttc" id="aclassRegistry_html_aa3aabe22621e394e0e17f2f2b35a59c8"><div class="ttname"><a href="classRegistry.html#aa3aabe22621e394e0e17f2f2b35a59c8">Registry::remove_all_scenes</a></div><div class="ttdeci">void remove_all_scenes()</div><div class="ttdoc">Deactivate all scenes.</div><div class="ttdef"><b>Definition</b> Registry.cpp:229</div></div>
<div class="ttc" id="aclassRegistry_html_aa3c7728231c60cf0e6742d693aa50bbf"><div class="ttname"><a href="classRegistry.html#aa3c7728231c60cf0e6742d693aa50bbf">Registry::register_component</a></div><div class="ttdeci">SparseArray&lt; Component &gt; &amp; register_component(std::string const &amp;string_id)</div><div class="ttdoc">Registers a bytable component type with a string identifier.</div><div class="ttdef"><b>Definition</b> Registry.hpp:329</div></div>
<div class="ttc" id="aclassRegistry_html_aa4dd65895727f2f8c6c78b89f43d6fc3"><div class="ttname"><a href="classRegistry.html#aa4dd65895727f2f8c6c78b89f43d6fc3">Registry::get_global_hooked_value</a></div><div class="ttdeci">std::optional&lt; std::reference_wrapper&lt; T &gt; &gt; get_global_hooked_value(std::string const &amp;name, std::string const &amp;value)</div><div class="ttdoc">Retrieve a reference to a global hooked component field.</div><div class="ttdef"><b>Definition</b> Registry.hpp:1920</div></div>
<div class="ttc" id="aclassRegistry_html_ab44989c0361996ad2c4aefbf4636b664"><div class="ttname"><a href="classRegistry.html#ab44989c0361996ad2c4aefbf4636b664">Registry::clear_bindings</a></div><div class="ttdeci">void clear_bindings()</div><div class="ttdoc">Removes all registered bindings.</div><div class="ttdef"><b>Definition</b> Registry.cpp:100</div></div>
<div class="ttc" id="aclassRegistry_html_ab8ff3522b765d882b46262ad345db07b"><div class="ttname"><a href="classRegistry.html#ab8ff3522b765d882b46262ad345db07b">Registry::get_components</a></div><div class="ttdeci">SparseArray&lt; Component &gt; &amp; get_components()</div><div class="ttdoc">Get the components object.</div><div class="ttdef"><b>Definition</b> Registry.hpp:396</div></div>
<div class="ttc" id="aclassRegistry_html_ac4b33f8cf1890733209cf94c0d15da4f"><div class="ttname"><a href="classRegistry.html#ac4b33f8cf1890733209cf94c0d15da4f">Registry::is_entity_dying</a></div><div class="ttdeci">bool is_entity_dying(Entity const &amp;e) const</div><div class="ttdoc">Checks if an entity is marked for deletion.</div><div class="ttdef"><b>Definition</b> Registry.cpp:36</div></div>
<div class="ttc" id="aclassRegistry_html_acc30fce2d18248ba7e54d051fa4288d9"><div class="ttname"><a href="classRegistry.html#acc30fce2d18248ba7e54d051fa4288d9">Registry::get_byte_entity</a></div><div class="ttdeci">ByteArray get_byte_entity(Entity entity)</div><div class="ttdef"><b>Definition</b> Registry.cpp:309</div></div>
<div class="ttc" id="aclassRegistry_html_ad1c9d136cf9da966ef0977d3c698a963"><div class="ttname"><a href="classRegistry.html#ad1c9d136cf9da966ef0977d3c698a963">Registry::set_current_scene</a></div><div class="ttdeci">void set_current_scene(std::string const &amp;scene_name)</div><div class="ttdoc">Activate a scene, making its entities visible to systems.</div><div class="ttdef"><b>Definition</b> Registry.cpp:214</div></div>
<div class="ttc" id="aclassRegistry_html_ad53c13e55864ae8333a766563d8167cc"><div class="ttname"><a href="classRegistry.html#ad53c13e55864ae8333a766563d8167cc">Registry::is_in_main_scene</a></div><div class="ttdeci">bool is_in_main_scene(Entity)</div><div class="ttdef"><b>Definition</b> Registry.cpp:239</div></div>
<div class="ttc" id="aclassRegistry_html_adfbcd0eed55c7f0d795443ef0f34c855"><div class="ttname"><a href="classRegistry.html#adfbcd0eed55c7f0d795443ef0f34c855">Registry::add_scene</a></div><div class="ttdeci">void add_scene(std::string const &amp;scene_name, SceneState state=SceneState::DISABLED)</div><div class="ttdoc">Register a scene with the given name and initial state.</div><div class="ttdef"><b>Definition</b> Registry.cpp:108</div></div>
<div class="ttc" id="aclassRegistry_html_ae484ce9b1fdb58e76997409a74227701"><div class="ttname"><a href="classRegistry.html#ae484ce9b1fdb58e76997409a74227701">Registry::run_systems</a></div><div class="ttdeci">void run_systems(EventManager &amp;)</div><div class="ttdoc">Registers a system function to run every frame.</div><div class="ttdef"><b>Definition</b> Registry.cpp:73</div></div>
<div class="ttc" id="aclassRegistry_html_ae83c694e0e30125b850edcc343406b76"><div class="ttname"><a href="classRegistry.html#ae83c694e0e30125b850edcc343406b76">Registry::remove_component</a></div><div class="ttdeci">void remove_component(Entity const &amp;from)</div><div class="ttdoc">Removes a component from an entity.</div><div class="ttdef"><b>Definition</b> Registry.hpp:818</div></div>
<div class="ttc" id="aclassRegistry_html_ae99ff1a3c4f750cba3bb80534f4295c4"><div class="ttname"><a href="classRegistry.html#ae99ff1a3c4f750cba3bb80534f4295c4">Registry::update_bindings</a></div><div class="ttdeci">void update_bindings(EventManager &amp;)</div><div class="ttdoc">Updates all registered dynamic bindings.</div><div class="ttdef"><b>Definition</b> Registry.cpp:85</div></div>
<div class="ttc" id="aclassRegistry_html_aed58f4389647aadc67b76a5db4e20bb3"><div class="ttname"><a href="classRegistry.html#aed58f4389647aadc67b76a5db4e20bb3">Registry::get_scene_states</a></div><div class="ttdeci">std::unordered_map&lt; std::string, SceneState &gt; const &amp; get_scene_states() const</div><div class="ttdoc">Get the scene states map.</div><div class="ttdef"><b>Definition</b> Registry.cpp:202</div></div>
<div class="ttc" id="aclassRegistry_html_aedaff3e905a52a1945250cd16ffbb5fb"><div class="ttname"><a href="classRegistry.html#aedaff3e905a52a1945250cd16ffbb5fb">Registry::emplace_component</a></div><div class="ttdeci">SparseArray&lt; Component &gt;::Ref emplace_component(Entity const &amp;to, Params &amp;&amp;... p)</div><div class="ttdoc">Constructs a component in-place on an entity.</div><div class="ttdef"><b>Definition</b> Registry.hpp:725</div></div>
<div class="ttc" id="aclassRegistry_html_aee1a7222875fdfa2859b6470a741b66e"><div class="ttname"><a href="classRegistry.html#aee1a7222875fdfa2859b6470a741b66e">Registry::add_system</a></div><div class="ttdeci">void add_system(Function &amp;&amp;f, std::size_t priority=0)</div><div class="ttdoc">Adds a system that operates on specified components.</div><div class="ttdef"><b>Definition</b> Registry.hpp:834</div></div>
<div class="ttc" id="aclassRegistry_html_af5df0cfd429a13867b1b490b996c3e8a"><div class="ttname"><a href="classRegistry.html#af5df0cfd429a13867b1b490b996c3e8a">Registry::activate_scene</a></div><div class="ttdeci">void activate_scene(std::string const &amp;scene_name)</div><div class="ttdoc">Activate a scene.</div><div class="ttdef"><b>Definition</b> Registry.cpp:134</div></div>
<div class="ttc" id="aclassRegistry_html_af774fbeb95691f112557590f04e5f150"><div class="ttname"><a href="classRegistry.html#af774fbeb95691f112557590f04e5f150">Registry::register_global_hook</a></div><div class="ttdeci">void register_global_hook(std::string const &amp;name, Entity const &amp;e)</div><div class="ttdoc">Register a global hook for singleton components.</div><div class="ttdef"><b>Definition</b> Registry.hpp:1769</div></div>
<div class="ttc" id="aclassRegistry_html_afdce4af207b1240a6c10b83ad66cc4b4"><div class="ttname"><a href="classRegistry.html#afdce4af207b1240a6c10b83ad66cc4b4">Registry::get_components</a></div><div class="ttdeci">SparseArray&lt; Component &gt; const &amp; get_components() const</div><div class="ttdef"><b>Definition</b> Registry.hpp:407</div></div>
<div class="ttc" id="aclassSparseArray_html"><div class="ttname"><a href="classSparseArray.html">SparseArray</a></div><div class="ttdoc">A sparse array implementation that stores components in an optional vector.</div><div class="ttdef"><b>Definition</b> SparseArray.hpp:16</div></div>
<div class="ttc" id="aclassSparseArray_html_a8d98f67cdc28187603f0cb5704fc6187"><div class="ttname"><a href="classSparseArray.html#a8d98f67cdc28187603f0cb5704fc6187">SparseArray::insert_at</a></div><div class="ttdeci">Ref insert_at(SizeType pos, Component &amp;&amp;v)</div><div class="ttdoc">Inserts a component at the specified position in the sparse array.</div><div class="ttdef"><b>Definition</b> SparseArray.hpp:60</div></div>
<div class="ttc" id="aclassSparseArray_html_a99d034602342854d7510793d0d7cde49"><div class="ttname"><a href="classSparseArray.html#a99d034602342854d7510793d0d7cde49">SparseArray::erase</a></div><div class="ttdeci">void erase(SizeType pos)</div><div class="ttdoc">Erases the component at the specified position in the sparse array.</div><div class="ttdef"><b>Definition</b> SparseArray.hpp:102</div></div>
<div class="ttc" id="aclassSparseArray_html_afcb68b007a0a116f234324bcc5a27ffc"><div class="ttname"><a href="classSparseArray.html#afcb68b007a0a116f234324bcc5a27ffc">SparseArray::Ref</a></div><div class="ttdeci">Value &amp; Ref</div><div class="ttdef"><b>Definition</b> SparseArray.hpp:24</div></div>
<div class="ttc" id="aclassSystem_html"><div class="ttname"><a href="classSystem.html">System</a></div><div class="ttdoc">Encapsulates a system function with priority-based execution ordering.</div><div class="ttdef"><b>Definition</b> Systems.hpp:54</div></div>
<div class="ttc" id="aclassTwoWayMap_html"><div class="ttname"><a href="classTwoWayMap.html">TwoWayMap</a></div><div class="ttdef"><b>Definition</b> TwoWayMap.hpp:9</div></div>
<div class="ttc" id="aclassTwoWayMap_html_a16bd3313c2cae823c5ad48d15ce003b2"><div class="ttname"><a href="classTwoWayMap.html#a16bd3313c2cae823c5ad48d15ce003b2">TwoWayMap::insert</a></div><div class="ttdeci">void insert(A const &amp;a, B const &amp;b)</div><div class="ttdef"><b>Definition</b> TwoWayMap.hpp:20</div></div>
<div class="ttc" id="aclassTwoWayMap_html_a9cefc33de6ef6f7c30b129c8e2430ffb"><div class="ttname"><a href="classTwoWayMap.html#a9cefc33de6ef6f7c30b129c8e2430ffb">TwoWayMap::at_first</a></div><div class="ttdeci">B const &amp; at_first(A const &amp;a) const</div><div class="ttdef"><b>Definition</b> TwoWayMap.hpp:26</div></div>
<div class="ttc" id="aconceptbytable_html"><div class="ttname"><a href="conceptbytable.html">bytable</a></div><div class="ttdoc">Type supports bidirectional byte conversion.</div><div class="ttdef"><b>Definition</b> Byte.hpp:69</div></div>
<div class="ttc" id="aconceptcomponent_html"><div class="ttname"><a href="conceptcomponent.html">component</a></div><div class="ttdoc">Requires a type to be serializable and entity-convertible for network sync.</div><div class="ttdef"><b>Definition</b> Registry.hpp:265</div></div>
<div class="ttc" id="aconceptentity__convertible_html"><div class="ttname"><a href="conceptentity__convertible.html">entity_convertible</a></div><div class="ttdoc">Checks if a type has a change_entity method for mapping entity IDs.</div><div class="ttdef"><b>Definition</b> EventConcept.hpp:43</div></div>
<div class="ttc" id="anamespaceEcs_html_a17fcea5750c1db2eea6f26c520f9235b"><div class="ttname"><a href="namespaceEcs.html#a17fcea5750c1db2eea6f26c520f9235b">Ecs::Entity</a></div><div class="ttdeci">std::size_t Entity</div><div class="ttdef"><b>Definition</b> Entity.hpp:7</div></div>
<div class="ttc" id="astructComponentState_html"><div class="ttname"><a href="structComponentState.html">ComponentState</a></div><div class="ttdoc">Captures the state of a component type across all entities.</div><div class="ttdef"><b>Definition</b> ComponentState.hpp:24</div></div>
<div class="ttc" id="astructComponentState_html_a8ef40682f2afd2813810875c4f2fbb19"><div class="ttname"><a href="structComponentState.html#a8ef40682f2afd2813810875c4f2fbb19">ComponentState::comps</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; size_t, ByteArray &gt; &gt; comps</div><div class="ttdoc">Entity-component pairs (entity ID, serialized component data)</div><div class="ttdef"><b>Definition</b> ComponentState.hpp:26</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
